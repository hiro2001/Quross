#include <wiringPi.h>
#include <wiringSerial.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <termio.h>
#include <unistd.h>
#include <sys/ioctl.h>
#include <string.h>
#include <sys/select.h>

#define BLINKING_RATE_MS 500
#define BUFFERDSIZE 5
#define SERIAL_PORT "/dev/ttyAMA0"

unsigned short mask_h = 65408; //マスク処理上8bits(0b1111111110000000)
unsigned short mask_l = 127;   //マスク処理下8bits(0b0000000001111111)
unsigned char tx[3];
unsigned char rx[10];

int opens(){
    int fd;
 	int rv; 
    struct termios tio;
    struct timeval timeout;

    timeout.tv_sec = 0;
    timeout.tv_usec = 10000;

    fd_set set;

    if ((fd = open(SERIAL_PORT, O_RDWR)) < 0)
    {
        fprintf(stderr, "open error\n");
        exit(1);
    }

    FD_ZERO(&set);
    FD_SET(fd, &set);

    bzero(&tio, sizeof(tio));

    /* 115200bps, フロー制御有り, ８ビット，DTR/DSR無効，受信可能 */
    tio.c_cflag = B115200 | CRTSCTS | CS8 | CLOCAL | CREAD | PARENB; 
    tio.c_cc[VMIN] = 1; /* 入力データをバッファしない */
    tcsetattr(fd, TCSANOW, &tio); /* アトリビュートのセット */

    fprintf(stderr, "*** check *** bbb ***\n");	


    return fd;
}

void sleepms(double i){
	usleep(i * 1000);
}

unsigned short servo_position(int fd, unsigned char id,int pos){
	tx[0] = 0x80|id;
   	tx[1] = (unsigned char)((pos & mask_h)>>7);
   	tx[2] = (unsigned char)(pos & mask_l);
    for(int i = 0;i < 10; i++){ 
		for(int i=0;i<3;i++)
    	{
        	write(fd, &tx[i], sizeof(tx[i]));
    	}
		sleepms(0.5);
    }
	return 0;
}

unsigned short servo_speed(int fd, unsigned char id,int speed){
    tx[0] = 0xC0|id;
    tx[1] = 0x02;
    tx[2] = 0x00|speed;
	for(int i = 0;i < 5; i++){
		for(int i=0;i<3;i++)
   		{
        	write(fd, &tx[i], sizeof(tx[i]));
    	}
		sleepms(0.5);
	}
    return 0;
}

void close_motion(int fd){
	int j;
	printf("moob1\n"); 
    for(j=1;j<13;j++){
        servo_speed(fd, j, 30);
    }
	servo_position(fd, 1,10167);
   	servo_position(fd, 4,10167);
   	servo_position(fd, 7,10167);
   	servo_position(fd, 10,10167);

	sleepms(1000);

	printf("moob2\n"); 
    for(j=1;j<13;j++){
        servo_speed(fd, j,30);
    }
   	servo_position(fd, 1,10167);
   	servo_position(fd, 4,10167);
   	servo_position(fd, 7,10167);
   	servo_position(fd, 10,10167);
   	servo_position(fd, 2,7600);
   	servo_position(fd, 5,7600);
   	servo_position(fd, 8,7600);
   	servo_position(fd, 11,7600);
    
	sleepms(1000);

	printf("moob3\n"); 
    for(j=1;j<13;j++){
        servo_speed(fd, j,30);
    }
   	servo_position(fd, 1,10167);
   	servo_position(fd, 4,10167);
   	servo_position(fd, 7,10167);
   	servo_position(fd, 10,10167);
   	servo_position(fd, 2,7600);
   	servo_position(fd, 5,7600);
   	servo_position(fd, 8,7600);
   	servo_position(fd, 11,7600);
   	servo_position(fd, 3,11500);
   	servo_position(fd, 6,11500);
   	servo_position(fd, 9,11500);
   	servo_position(fd, 12,11500);
	
	sleepms(1000);

	printf("moob4\n"); 
    for(j=1;j<13;j++){
        servo_speed(fd, j,30);
    }	
   	servo_position(fd, 1,10167);
   	servo_position(fd, 4,10167);
   	servo_position(fd, 7,10167);
   	servo_position(fd, 10,10167);
   	servo_position(fd, 3,11500);
   	servo_position(fd, 6,11500);
   	servo_position(fd, 9,11500);
   	servo_position(fd, 12,11500);
   	servo_position(fd, 2,4933);
   	servo_position(fd, 5,4933);
   	servo_position(fd, 8,4933);
   	servo_position(fd, 11,4933);
	sleepms(1000);
}

void open_motion_crawl(int fd){
    int open_crawl[10][12]={{8780,7600,10277,8780,7600,10277,8780,7600,10277,8780,7600,10277},
    {8741,7600,10260,8741,7600,10260,8741,7600,10260,8741,7600,10260},
    {8701,7600,10243,8701,7600,10243,8701,7600,10243,8701,7600,10243},
    {8662,7600,10225,8662,7600,10225,8662,7600,10225,8662,7600,10225},
    {8622,7600,10207,8622,7600,10207,8622,7600,10207,8622,7600,10207},
    {8583,7600,10188,8583,7600,10188,8583,7600,10188,8583,7600,10188},
    {8544,7600,10169,8544,7600,10169,8544,7600,10169,8544,7600,10169},
    {8505,7600,10150,8505,7600,10150,8505,7600,10150,8505,7600,10150},
    {8466,7600,10130,8466,7600,10130,8466,7600,10130,8466,7600,10130},
    {8428,7600,10110,8428,7600,10110,8428,7600,10110,8428,7600,10110}};
	int open_count = 0;
	int open_crawl_max = 10;	
	int j;

    for(j=1;j<13;j++){
        servo_speed(fd, j,50);
    }
    servo_position(fd, 2,7600);
    servo_position(fd, 5,7600);
    servo_position(fd, 8,7600);
    servo_position(fd, 11,7600);
	sleepms(500);
    
    for(j=1;j<13;j++){
        servo_speed(fd, j,50);
    }
    servo_position(fd, 3,10294);
    servo_position(fd, 6,10294);
    servo_position(fd, 9,10294);
    servo_position(fd, 12,10294);
	sleepms(60);

    for(j=1;j<13;j++){
        servo_speed(fd, j,50);
    }
    servo_position(fd, 1,8820);
    servo_position(fd, 4,8820);
    servo_position(fd, 7,8820);
    servo_position(fd, 10,8820);
	sleepms(100);
    
    while(open_count<open_crawl_max){
        for(j=1;j<13;j++){
        	servo_speed(fd, j,50);
        }
        servo_position(fd, 10,open_crawl[open_count][0]);
        servo_position(fd, 11,open_crawl[open_count][1]);
        servo_position(fd, 12,open_crawl[open_count][2]);
        servo_position(fd, 1,open_crawl[open_count][3]);
        servo_position(fd, 2,open_crawl[open_count][4]);
        servo_position(fd, 3,open_crawl[open_count][5]);
        servo_position(fd, 7,open_crawl[open_count][6]);
        servo_position(fd, 8,open_crawl[open_count][7]);
        servo_position(fd, 9,open_crawl[open_count][8]);
        servo_position(fd, 4,open_crawl[open_count][9]);
        servo_position(fd, 5,open_crawl[open_count][10]);
        servo_position(fd, 6,open_crawl[open_count][11]);
        open_count++;
		sleepms(20);
    }
    open_count=0;
}

void open_motion(int fd){
	int j;
    for(j=1;j<13;j++){
        servo_speed(fd, j,50);
    }
	printf("motion1\n");
    servo_position(fd, 2,7600);
    servo_position(fd, 5,7600);
    servo_position(fd, 8,7600);
    servo_position(fd, 11,7600);
	sleepms(50);   
 
    for(j=1;j<13;j++){
        servo_speed(fd, j,50);
    }
	printf("motion2\n");
    servo_position(fd, 3,10294);
    servo_position(fd, 6,10294);
    servo_position(fd, 9,10294);
    servo_position(fd, 12,10294);
	sleepms(60);   

    for(j=1;j<13;j++){
        servo_speed(fd, j,50);
    }
    servo_position(fd, 1,8820);
    servo_position(fd, 4,8820);
    servo_position(fd, 7,8820);
    servo_position(fd, 10,8820);
	sleepms(100);   
}

void stand_set_motion(int fd){
    for(int j=1;j<13;j++){
        servo_speed(fd, j,30);

    }
	printf("motion1\n");
    servo_position(fd, 2,7500);
    servo_position(fd, 5,7500);
    servo_position(fd, 8,7500);
    servo_position(fd, 11,7500);
	sleepms(500);  
	printf("motion2\n"); 
    servo_position(fd, 1,9870);
    servo_position(fd, 3,10922);
    servo_position(fd, 4,9870);
    servo_position(fd, 6,10922);
    servo_position(fd, 7,9870);
    servo_position(fd, 9,10922);
    servo_position(fd, 10,9870);
    servo_position(fd, 12,10922);
	sleepms(500);   
}

void stand_motion(int fd){
    for(int j=1;j<13;j++){
        servo_speed(fd, j,30);
    }
	printf("motion1\n");    
    servo_position(fd, 1,9870);
    servo_position(fd, 3,8922);
    servo_position(fd, 4,9870);
    servo_position(fd, 6,8922);
    servo_position(fd, 7,9870);
    servo_position(fd, 9,8922);
    servo_position(fd, 10,9870);
    servo_position(fd, 12,8922);
	sleepms(500);  
	printf("motion2\n"); 
    servo_position(fd, 1,6820);
    servo_position(fd, 4,6820);
    servo_position(fd, 7,6820);
    servo_position(fd, 10,6820);
	sleepms(500);  
	printf("motion3\n"); 
    servo_position(fd, 3,4922);
    servo_position(fd, 6,4922);
    servo_position(fd, 9,4922);
    servo_position(fd, 12,4922);
	sleepms(500);   
    printf("motion4");
    servo_position(fd, 1,7820);
    servo_position(fd, 3,5522);
    servo_position(fd, 4,7820);
    servo_position(fd, 6,5522);
    servo_position(fd, 7,7820);
    servo_position(fd, 9,5522);
    servo_position(fd, 10,7820);
    servo_position(fd, 12,5522);
	sleepms(1000);   
}

void stand_close(int fd){
    for(int j=1;j<13;j++){
        servo_speed(fd, j,30);
    }   
	printf("motion1\n"); 
    servo_position(fd, 1,6820);
    servo_position(fd, 4,6820);
    servo_position(fd, 7,6820);
    servo_position(fd, 10,6820);
	sleepms(500);   
   
	printf("motion2\n"); 
    servo_position(fd, 3,8922);
    servo_position(fd, 6,8922);
    servo_position(fd, 9,8922);
    servo_position(fd, 12,8922);
	sleepms(100);   
   
	printf("motion3\n"); 
	servo_position(fd, 1,9870);
    servo_position(fd, 4,9870);
    servo_position(fd, 7,9870);
    servo_position(fd, 10,9870);
	sleepms(100);   
   
	printf("motion4\n"); 
    servo_position(fd, 2,7500);
    servo_position(fd, 5,7500);
    servo_position(fd, 8,7500);
    servo_position(fd, 11,7500);
	sleepms(100);   
   
	printf("motino5\n"); 
    servo_position(fd, 1,10167);
    servo_position(fd, 4,10167);
    servo_position(fd, 7,10167);
    servo_position(fd, 10,10167);
    servo_position(fd, 2,7600);
    servo_position(fd, 5,7600);
    servo_position(fd, 8,7600);
    servo_position(fd, 11,7600);
    servo_position(fd, 3,11500);
    servo_position(fd, 6,11500);
    servo_position(fd, 9,11500);
    servo_position(fd, 12,11500);
	sleepms(2000);   
   
 
	printf("motino6\n"); 
    servo_position(fd, 2,4933);
    servo_position(fd, 5,4933);
    servo_position(fd, 8,4933);
    servo_position(fd, 11,4933);
	sleepms(100);   
}

void set_motion(int fd){
    for(int j=1;j<13;j++){
        servo_speed(fd, j,30);
    }
    servo_position(fd, 2,7500);
	sleepms(2);   
    
    servo_position(fd, 5,7500);
	sleepms(2);   
    
    servo_position(fd, 11,7500);
	sleepms(500);   
    
    servo_position(fd, 1,9870);
	sleepms(2);   
    
    servo_position(fd, 3,8922);
	sleepms(2);   
}

void flip_motion(int fd){
    for(int j=1;j<13;j++){
        servo_speed(fd, j,50);
    }
    int first = 8158;
    int second = 7600;
    int third = 9116;
    
    servo_position(fd, 4,first);
	sleepms(2);   
    
    servo_position(fd, 5,second);
	sleepms(2);   
    
    servo_position(fd, 6,third);
	sleepms(2);   
    
    servo_position(fd, 10,first);
	sleepms(2);   
    
    servo_position(fd, 11,second);
	sleepms(2);   
    
    servo_position(fd, 12,third);
	sleepms(1000);   
    
    servo_position(fd, 3,7500);
	sleepms(500);   
    
    servo_position(fd, 1,first);
	sleepms(2);   
    servo_position(fd, 2,second);
	sleepms(2);   
    servo_position(fd, 3,third);
	sleepms(500);   
    
    servo_position(fd, 1,8907);
	sleepms(2);   
    servo_position(fd, 3,10563);
	sleepms(2);   
    servo_position(fd, 8,7500);
	sleepms(500);   
    servo_position(fd, 7,8907);
	sleepms(2);   
    servo_position(fd, 9,10563);
	sleepms(2);   
}

void end_motion(int fd){
    for(int j=1;j<13;j++){
        servo_speed(fd, j,30);
    }
    int first = 9459;
    int third = 10495;
    
    servo_position(fd, 4,first);
	sleepms(2);   
    
    servo_position(fd, 6,third);
	sleepms(2);   
    
    servo_position(fd, 10,first);
	sleepms(2);   
    
    servo_position(fd, 12,third);
	sleepms(300);   
    
    first = 8907;
    third = 10565;
    
    servo_position(fd, 4,first);
	sleepms(2);   
    
    servo_position(fd, 6,third);
	sleepms(2);   
    
    servo_position(fd, 10,first);
	sleepms(2);   
    
    servo_position(fd, 12,third);
	sleepms(1000);   
}

void crawl_motion1(int fd){
    int crawl[100][12]={{8092,7044,9421,8428,7266,10339,8447,7464,10222,8192,7200,9621},
	{8167,7069,9482,8424,7249,10347,8446,7479,10210,8204,7214,9641},
	{8253,7105,9562,8419,7231,10355,8445,7495,10198,8216,7228,9661},
	{8347,7152,9656,8414,7213,10363,8443,7510,10186,8228,7241,9681},
	{8443,7208,9759,8409,7196,10370,8442,7526,10174,8240,7255,9700},
	{8539,7271,9870,8403,7178,10377,8439,7541,10162,8251,7269,9719},
	{8629,7342,9982,8397,7160,10383,8437,7556,10149,8262,7282,9738},
	{8708,7420,10093,8390,7142,10390,8434,7571,10136,8272,7296,9757},
	{8773,7506,10198,8383,7124,10396,8431,7585,10123,8283,7310,9775},
	{8820,7600,10293,8375,7106,10402,8428,7600,10110,8293,7323,9794},
	{8845,7701,10376,8367,7087,10407,8424,7615,10096,8302,7337,9812},
	{8846,7805,10444,8358,7069,10412,8420,7629,10082,8312,7350,9829},
	{8821,7911,10494,8349,7050,10417,8415,7643,10068,8321,7363,9847},
	{8773,8011,10526,8340,7032,10422,8410,7658,10054,8329,7377,9864},
	{8704,8101,10541,8330,7013,10426,8405,7672,10039,8338,7390,9881},
	{8620,8176,10541,8319,6994,10430,8400,7686,10024,8346,7404,9898},
	{8528,8232,10529,8308,6976,10434,8394,7700,10009,8354,7418,9915},
	{8435,8269,10506,8297,6957,10437,8388,7714,9994,8361,7431,9931},
	{8348,8285,10477,8285,6938,10440,8382,7728,9979,8368,7445,9947},
	{8272,8281,10443,8272,6919,10443,8375,7741,9963,8375,7459,9963},
	{8285,8262,10440,8348,6915,10477,8368,7755,9947,8382,7472,9979},
	{8297,8243,10437,8435,6931,10506,8361,7769,9931,8388,7486,9994},
	{8308,8224,10434,8528,6968,10529,8354,7782,9915,8394,7500,10009},
	{8319,8206,10430,8620,7024,10541,8346,7796,9898,8400,7514,10024},
	{8330,8187,10426,8704,7099,10541,8338,7810,9881,8405,7528,10039},
	{8340,8168,10422,8773,7189,10526,8329,7823,9864,8410,7542,10054},
	{8349,8150,10417,8821,7289,10494,8321,7837,9847,8415,7557,10068},
	{8358,8131,10412,8846,7395,10444,8312,7850,9829,8420,7571,10082},
	{8367,8113,10407,8845,7499,10376,8302,7863,9812,8424,7585,10096},
	{8375,8094,10402,8820,7600,10293,8293,7877,9794,8428,7600,10110},
	{8383,8076,10396,8773,7694,10198,8283,7890,9775,8431,7615,10123},
	{8390,8058,10390,8708,7780,10093,8272,7904,9757,8434,7629,10136},
	{8397,8040,10383,8629,7858,9982,8262,7918,9738,8437,7644,10149},
	{8403,8022,10377,8539,7929,9870,8251,7931,9719,8439,7659,10162},
	{8409,8004,10370,8443,7992,9759,8240,7945,9700,8442,7674,10174},
	{8414,7987,10363,8347,8048,9656,8228,7959,9681,8443,7690,10186},
	{8419,7969,10355,8253,8095,9562,8216,7972,9661,8445,7705,10198},
	{8424,7951,10347,8167,8131,9482,8204,7986,9641,8446,7721,10210},
	{8428,7934,10339,8092,8156,9421,8192,8000,9621,8447,7736,10222},
	{8432,7917,10331,8030,8166,9379,8179,8014,9600,8447,7752,10233},
	{8435,7900,10322,8047,8149,9403,8166,8029,9579,8447,7768,10244},
	{8438,7883,10313,8063,8133,9426,8152,8043,9558,8447,7784,10254},
	{8440,7866,10304,8079,8118,9449,8138,8057,9537,8447,7800,10265},
	{8442,7849,10295,8094,8102,9471,8124,8072,9515,8446,7816,10275},
	{8444,7833,10285,8109,8087,9493,8109,8087,9493,8444,7833,10285},
	{8446,7816,10275,8124,8072,9515,8094,8102,9471,8442,7849,10295},
	{8447,7800,10265,8138,8057,9537,8079,8118,9449,8440,7866,10304},
	{8447,7784,10254,8152,8043,9558,8063,8133,9426,8438,7883,10313},
	{8447,7768,10244,8166,8029,9579,8047,8149,9403,8435,7900,10322},
	{8447,7752,10233,8179,8014,9600,8030,8166,9379,8432,7917,10331},
	{8447,7736,10222,8192,8000,9621,8092,8156,9421,8428,7934,10339},
	{8446,7721,10210,8204,7986,9641,8167,8131,9482,8424,7951,10347},
	{8445,7705,10198,8216,7972,9661,8253,8095,9562,8419,7969,10355},
	{8443,7690,10186,8228,7959,9681,8347,8048,9656,8414,7987,10363},
	{8442,7674,10174,8240,7945,9700,8443,7992,9759,8409,8004,10370},
	{8439,7659,10162,8251,7931,9719,8539,7929,9870,8403,8022,10377},
	{8437,7644,10149,8262,7918,9738,8629,7858,9982,8397,8040,10383},
	{8434,7629,10136,8272,7904,9757,8708,7780,10093,8390,8058,10390},
	{8431,7615,10123,8283,7890,9775,8773,7694,10198,8383,8076,10396},
	{8428,7600,10110,8293,7877,9794,8820,7600,10293,8375,8094,10402},
	{8424,7585,10096,8302,7863,9812,8845,7499,10376,8367,8113,10407},
	{8420,7571,10082,8312,7850,9829,8846,7395,10444,8358,8131,10412},
	{8415,7557,10068,8321,7837,9847,8821,7289,10494,8349,8150,10417},
	{8410,7542,10054,8329,7823,9864,8773,7189,10526,8340,8168,10422},
	{8405,7528,10039,8338,7810,9881,8704,7099,10541,8330,8187,10426},
	{8400,7514,10024,8346,7796,9898,8620,7024,10541,8319,8206,10430},
	{8394,7500,10009,8354,7782,9915,8528,6968,10529,8308,8224,10434},
	{8388,7486,9994,8361,7769,9931,8435,6931,10506,8297,8243,10437},
	{8382,7472,9979,8368,7755,9947,8348,6915,10477,8285,8262,10440},
	{8375,7459,9963,8375,7741,9963,8272,6919,10443,8272,8281,10443},
	{8368,7445,9947,8382,7728,9979,8285,6938,10440,8348,8285,10477},
	{8361,7431,9931,8388,7714,9994,8297,6957,10437,8435,8269,10506},
	{8354,7418,9915,8394,7700,10009,8308,6976,10434,8528,8232,10529},
	{8346,7404,9898,8400,7686,10024,8319,6994,10430,8620,8176,10541},
	{8338,7390,9881,8405,7672,10039,8330,7013,10426,8704,8101,10541},
	{8329,7377,9864,8410,7658,10054,8340,7032,10422,8773,8011,10526},
	{8321,7363,9847,8415,7643,10068,8349,7050,10417,8821,7911,10494},
	{8312,7350,9829,8420,7629,10082,8358,7069,10412,8846,7805,10444},
	{8302,7337,9812,8424,7615,10096,8367,7087,10407,8845,7701,10376},
	{8293,7323,9794,8428,7600,10110,8375,7106,10402,8820,7600,10293},
	{8283,7310,9775,8431,7585,10123,8383,7124,10396,8773,7506,10198},
	{8272,7296,9757,8434,7571,10136,8390,7142,10390,8708,7420,10093},
	{8262,7282,9738,8437,7556,10149,8397,7160,10383,8629,7342,9982},
	{8251,7269,9719,8439,7541,10162,8403,7178,10377,8539,7271,9870},
	{8240,7255,9700,8442,7526,10174,8409,7196,10370,8443,7208,9759},
	{8228,7241,9681,8443,7510,10186,8414,7213,10363,8347,7152,9656},
	{8216,7228,9661,8445,7495,10198,8419,7231,10355,8253,7105,9562},
	{8204,7214,9641,8446,7479,10210,8424,7249,10347,8167,7069,9482},
	{8192,7200,9621,8447,7464,10222,8428,7266,10339,8092,7044,9421},
	{8179,7186,9600,8447,7448,10233,8432,7283,10331,8030,7034,9379},
	{8166,7171,9579,8447,7432,10244,8435,7300,10322,8047,7051,9403},
	{8152,7157,9558,8447,7416,10254,8438,7317,10313,8063,7067,9426},
	{8138,7143,9537,8447,7400,10265,8440,7334,10304,8079,7082,9449},
	{8124,7128,9515,8446,7384,10275,8442,7351,10295,8094,7098,9471},
	{8109,7113,9493,8444,7367,10285,8444,7367,10285,8109,7113,9493},
	{8094,7098,9471,8442,7351,10295,8446,7384,10275,8124,7128,9515},
	{8079,7082,9449,8440,7334,10304,8447,7400,10265,8138,7143,9537},
	{8063,7067,9426,8438,7317,10313,8447,7416,10254,8152,7157,9558},
	{8047,7051,9403,8435,7300,10322,8447,7432,10244,8166,7171,9579},
	{8030,7034,9379,8432,7283,10331,8447,7448,10233,8179,7186,9600}};

    for(int j=1;j<13;j++){
        servo_speed(fd, j,70);
    }
    for(int i = 0; i < 100; i++){
        servo_position(fd, 10,crawl[i][0]);
        servo_position(fd, 11,crawl[i][1]);
        servo_position(fd, 12,crawl[i][2]);
        servo_position(fd, 1,crawl[i][3]);
        servo_position(fd, 2,crawl[i][4]);
        servo_position(fd, 3,crawl[i][5]);
        servo_position(fd, 7,crawl[i][6]);
        servo_position(fd, 8,crawl[i][7]);
        servo_position(fd, 9,crawl[i][8]);
        servo_position(fd, 4,crawl[i][9]);
        servo_position(fd, 5,crawl[i][10]);
        servo_position(fd, 6,crawl[i][11]);
   		sleepms(2); 
	}
}

void crawl_motion2(int fd ){
    int crawl[100][12]={{8092,7044,9421,8428,7266,10339,8447,7464,10222,8192,7200,9621},
    {8167,7069,9482,8424,7249,10347,8446,7479,10210,8204,7214,9641},
    {8253,7105,9562,8419,7231,10355,8445,7495,10198,8216,7228,9661},
    {8347,7152,9656,8414,7213,10363,8443,7510,10186,8228,7241,9681},
    {8443,7208,9759,8409,7196,10370,8442,7526,10174,8240,7255,9700},
    {8539,7271,9870,8403,7178,10377,8439,7541,10162,8251,7269,9719},
    {8629,7342,9982,8397,7160,10383,8437,7556,10149,8262,7282,9738},
    {8708,7420,10093,8390,7142,10390,8434,7571,10136,8272,7296,9757},
    {8773,7506,10198,8383,7124,10396,8431,7585,10123,8283,7310,9775},
    {8820,7600,10293,8375,7106,10402,8428,7600,10110,8293,7323,9794},
    {8845,7701,10376,8367,7087,10407,8424,7615,10096,8302,7337,9812},
    {8846,7805,10444,8358,7069,10412,8420,7629,10082,8312,7350,9829},
    {8821,7911,10494,8349,7050,10417,8415,7643,10068,8321,7363,9847},
    {8773,8011,10526,8340,7032,10422,8410,7658,10054,8329,7377,9864},
    {8704,8101,10541,8330,7013,10426,8405,7672,10039,8338,7390,9881},
    {8620,8176,10541,8319,6994,10430,8400,7686,10024,8346,7404,9898},
    {8528,8232,10529,8308,6976,10434,8394,7700,10009,8354,7418,9915},
    {8435,8269,10506,8297,6957,10437,8388,7714,9994,8361,7431,9931},
    {8348,8285,10477,8285,6938,10440,8382,7728,9979,8368,7445,9947},
    {8272,8281,10443,8272,6919,10443,8375,7741,9963,8375,7459,9963},
    {8285,8262,10440,8348,6915,10477,8368,7755,9947,8382,7472,9979},
    {8297,8243,10437,8435,6931,10506,8361,7769,9931,8388,7486,9994},
    {8308,8224,10434,8528,6968,10529,8354,7782,9915,8394,7500,10009},
    {8319,8206,10430,8620,7024,10541,8346,7796,9898,8400,7514,10024},
    {8330,8187,10426,8704,7099,10541,8338,7810,9881,8405,7528,10039},
    {8340,8168,10422,8773,7189,10526,8329,7823,9864,8410,7542,10054},
    {8349,8150,10417,8821,7289,10494,8321,7837,9847,8415,7557,10068},
    {8358,8131,10412,8846,7395,10444,8312,7850,9829,8420,7571,10082},
    {8367,8113,10407,8845,7499,10376,8302,7863,9812,8424,7585,10096},
    {8375,8094,10402,8820,7600,10293,8293,7877,9794,8428,7600,10110},
    {8383,8076,10396,8773,7694,10198,8283,7890,9775,8431,7615,10123},
    {8390,8058,10390,8708,7780,10093,8272,7904,9757,8434,7629,10136},
    {8397,8040,10383,8629,7858,9982,8262,7918,9738,8437,7644,10149},
    {8403,8022,10377,8539,7929,9870,8251,7931,9719,8439,7659,10162},
    {8409,8004,10370,8443,7992,9759,8240,7945,9700,8442,7674,10174},
    {8414,7987,10363,8347,8048,9656,8228,7959,9681,8443,7690,10186},
    {8419,7969,10355,8253,8095,9562,8216,7972,9661,8445,7705,10198},
    {8424,7951,10347,8167,8131,9482,8204,7986,9641,8446,7721,10210},
    {8428,7934,10339,8092,8156,9421,8192,8000,9621,8447,7736,10222},
    {8432,7917,10331,8030,8166,9379,8179,8014,9600,8447,7752,10233},
    {8435,7900,10322,8047,8149,9403,8166,8029,9579,8447,7768,10244},
    {8438,7883,10313,8063,8133,9426,8152,8043,9558,8447,7784,10254},
    {8440,7866,10304,8079,8118,9449,8138,8057,9537,8447,7800,10265},
    {8442,7849,10295,8094,8102,9471,8124,8072,9515,8446,7816,10275},
    {8444,7833,10285,8109,8087,9493,8109,8087,9493,8444,7833,10285},
    {8446,7816,10275,8124,8072,9515,8094,8102,9471,8442,7849,10295},
    {8447,7800,10265,8138,8057,9537,8079,8118,9449,8440,7866,10304},
    {8447,7784,10254,8152,8043,9558,8063,8133,9426,8438,7883,10313},
    {8447,7768,10244,8166,8029,9579,8047,8149,9403,8435,7900,10322},
    {8447,7752,10233,8179,8014,9600,8030,8166,9379,8432,7917,10331},
    {8447,7736,10222,8192,8000,9621,8092,8156,9421,8428,7934,10339},
    {8446,7721,10210,8204,7986,9641,8167,8131,9482,8424,7951,10347},
    {8445,7705,10198,8216,7972,9661,8253,8095,9562,8419,7969,10355},
    {8443,7690,10186,8228,7959,9681,8347,8048,9656,8414,7987,10363},
    {8442,7674,10174,8240,7945,9700,8443,7992,9759,8409,8004,10370},
    {8439,7659,10162,8251,7931,9719,8539,7929,9870,8403,8022,10377},
    {8437,7644,10149,8262,7918,9738,8629,7858,9982,8397,8040,10383},
    {8434,7629,10136,8272,7904,9757,8708,7780,10093,8390,8058,10390},
    {8431,7615,10123,8283,7890,9775,8773,7694,10198,8383,8076,10396},
    {8428,7600,10110,8293,7877,9794,8820,7600,10293,8375,8094,10402},
    {8424,7585,10096,8302,7863,9812,8845,7499,10376,8367,8113,10407},
    {8420,7571,10082,8312,7850,9829,8846,7395,10444,8358,8131,10412},
    {8415,7557,10068,8321,7837,9847,8821,7289,10494,8349,8150,10417},
    {8410,7542,10054,8329,7823,9864,8773,7189,10526,8340,8168,10422},
    {8405,7528,10039,8338,7810,9881,8704,7099,10541,8330,8187,10426},
    {8400,7514,10024,8346,7796,9898,8620,7024,10541,8319,8206,10430},
    {8394,7500,10009,8354,7782,9915,8528,6968,10529,8308,8224,10434},
    {8388,7486,9994,8361,7769,9931,8435,6931,10506,8297,8243,10437},
    {8382,7472,9979,8368,7755,9947,8348,6915,10477,8285,8262,10440},
    {8375,7459,9963,8375,7741,9963,8272,6919,10443,8272,8281,10443},
    {8368,7445,9947,8382,7728,9979,8285,6938,10440,8348,8285,10477},
    {8361,7431,9931,8388,7714,9994,8297,6957,10437,8435,8269,10506},
    {8354,7418,9915,8394,7700,10009,8308,6976,10434,8528,8232,10529},
    {8346,7404,9898,8400,7686,10024,8319,6994,10430,8620,8176,10541},
    {8338,7390,9881,8405,7672,10039,8330,7013,10426,8704,8101,10541},
    {8329,7377,9864,8410,7658,10054,8340,7032,10422,8773,8011,10526},
    {8321,7363,9847,8415,7643,10068,8349,7050,10417,8821,7911,10494},
    {8312,7350,9829,8420,7629,10082,8358,7069,10412,8846,7805,10444},
    {8302,7337,9812,8424,7615,10096,8367,7087,10407,8845,7701,10376},
    {8293,7323,9794,8428,7600,10110,8375,7106,10402,8820,7600,10293},
    {8283,7310,9775,8431,7585,10123,8383,7124,10396,8773,7506,10198},
    {8272,7296,9757,8434,7571,10136,8390,7142,10390,8708,7420,10093},
    {8262,7282,9738,8437,7556,10149,8397,7160,10383,8629,7342,9982},
    {8251,7269,9719,8439,7541,10162,8403,7178,10377,8539,7271,9870},
    {8240,7255,9700,8442,7526,10174,8409,7196,10370,8443,7208,9759},
    {8228,7241,9681,8443,7510,10186,8414,7213,10363,8347,7152,9656},
    {8216,7228,9661,8445,7495,10198,8419,7231,10355,8253,7105,9562},
    {8204,7214,9641,8446,7479,10210,8424,7249,10347,8167,7069,9482},
    {8192,7200,9621,8447,7464,10222,8428,7266,10339,8092,7044,9421},
    {8179,7186,9600,8447,7448,10233,8432,7283,10331,8030,7034,9379},
    {8166,7171,9579,8447,7432,10244,8435,7300,10322,8047,7051,9403},
    {8152,7157,9558,8447,7416,10254,8438,7317,10313,8063,7067,9426},
    {8138,7143,9537,8447,7400,10265,8440,7334,10304,8079,7082,9449},
    {8124,7128,9515,8446,7384,10275,8442,7351,10295,8094,7098,9471},
    {8109,7113,9493,8444,7367,10285,8444,7367,10285,8109,7113,9493},
    {8094,7098,9471,8442,7351,10295,8446,7384,10275,8124,7128,9515},
    {8079,7082,9449,8440,7334,10304,8447,7400,10265,8138,7143,9537},
    {8063,7067,9426,8438,7317,10313,8447,7416,10254,8152,7157,9558},
    {8047,7051,9403,8435,7300,10322,8447,7432,10244,8166,7171,9579},
    {8030,7034,9379,8432,7283,10331,8447,7448,10233,8179,7186,9600}};

    for(int j=1;j<13;j++){
        servo_speed(fd, j,70);
    }
    for(int i = 99; i >= 0; i--){
        servo_position(fd, 10,crawl[i][0]);
        servo_position(fd, 11,crawl[i][1]);
        servo_position(fd, 12,crawl[i][2]);
        servo_position(fd, 1,crawl[i][3]);
        servo_position(fd, 2,crawl[i][4]);
        servo_position(fd, 3,crawl[i][5]);
        servo_position(fd, 7,crawl[i][6]);
        servo_position(fd, 8,crawl[i][7]);
        servo_position(fd, 9,crawl[i][8]);
        servo_position(fd, 4,crawl[i][9]);
        servo_position(fd, 5,crawl[i][10]);
        servo_position(fd, 6,crawl[i][11]);
   		sleepms(2); 
	}
}

void turn_left(int fd){
    int left[100][12]={{8414,7248,10135,8414,7752,10135,8236,6747,10089,8286,8258,10114},
    {8418,7268,10135,8411,7773,10134,8247,6767,10092,8367,8204,10146},
    {8421,7288,10136,8407,7793,10133,8258,6787,10094,8444,8148,10176},
    {8423,7308,10137,8403,7813,10131,8268,6807,10097,8515,8091,10204},
    {8426,7328,10138,8399,7833,10130,8278,6827,10099,8580,8033,10230},
    {8428,7348,10138,8394,7853,10129,8288,6846,10102,8639,7974,10252},
    {8430,7369,10139,8389,7873,10128,8297,6866,10104,8691,7913,10272},
    {8432,7389,10139,8384,7893,10126,8306,6886,10106,8735,7852,10289},
    {8433,7409,10140,8378,7914,10125,8315,6906,10108,8771,7789,10303},
    {8434,7429,10140,8372,7934,10123,8323,6926,10110,8799,7726,10313},
    {8435,7449,10140,8366,7954,10122,8331,6946,10112,8819,7662,10321},
    {8435,7470,10140,8360,7974,10120,8339,6966,10114,8830,7597,10325},
    {8436,7490,10140,8353,7994,10118,8346,6986,10116,8832,7532,10326},
    {8436,7510,10140,8346,8014,10116,8353,7006,10118,8825,7468,10323},
    {8435,7530,10140,8339,8034,10114,8360,7026,10120,8811,7403,10317},
    {8435,7551,10140,8331,8054,10112,8366,7046,10122,8787,7339,10308},
    {8434,7571,10140,8323,8074,10110,8372,7066,10123,8756,7276,10295},
    {8433,7591,10140,8315,8094,10108,8378,7086,10125,8717,7214,10280},
    {8432,7611,10139,8306,8114,10106,8384,7107,10126,8670,7152,10261},
    {8430,7631,10139,8297,8134,10104,8389,7127,10128,8617,7092,10240},
    {8428,7652,10138,8288,8154,10102,8394,7147,10129,8557,7033,10216},
    {8426,7672,10138,8278,8173,10099,8399,7167,10130,8492,6975,10189},
    {8423,7692,10137,8268,8193,10097,8403,7187,10131,8421,6918,10160},
    {8421,7712,10136,8258,8213,10094,8407,7207,10133,8347,6862,10129},
    {8418,7732,10135,8247,8233,10092,8411,7227,10134,8268,6807,10097},
    {8414,7752,10135,8286,8258,10114,8414,7248,10135,8236,6747,10089},
    {8411,7773,10134,8367,8204,10146,8418,7268,10135,8247,6767,10092},
    {8407,7793,10133,8444,8148,10176,8421,7288,10136,8258,6787,10094},
    {8403,7813,10131,8515,8091,10204,8423,7308,10137,8268,6807,10097},
    {8399,7833,10130,8580,8033,10230,8426,7328,10138,8278,6827,10099},
    {8394,7853,10129,8639,7974,10252,8428,7348,10138,8288,6846,10102},
    {8389,7873,10128,8691,7913,10272,8430,7369,10139,8297,6866,10104},
    {8384,7893,10126,8735,7852,10289,8432,7389,10139,8306,6886,10106},
    {8378,7914,10125,8771,7789,10303,8433,7409,10140,8315,6906,10108},
    {8372,7934,10123,8799,7726,10313,8434,7429,10140,8323,6926,10110},
    {8366,7954,10122,8819,7662,10321,8435,7449,10140,8331,6946,10112},
    {8360,7974,10120,8830,7597,10325,8435,7470,10140,8339,6966,10114},
    {8353,7994,10118,8832,7532,10326,8436,7490,10140,8346,6986,10116},
    {8346,8014,10116,8825,7468,10323,8436,7510,10140,8353,7006,10118},
    {8339,8034,10114,8811,7403,10317,8435,7530,10140,8360,7026,10120},
    {8331,8054,10112,8787,7339,10308,8435,7551,10140,8366,7046,10122},
    {8323,8074,10110,8756,7276,10295,8434,7571,10140,8372,7066,10123},
    {8315,8094,10108,8717,7214,10280,8433,7591,10140,8378,7086,10125},
    {8306,8114,10106,8670,7152,10261,8432,7611,10139,8384,7107,10126},
    {8297,8134,10104,8617,7092,10240,8430,7631,10139,8389,7127,10128},
    {8288,8154,10102,8557,7033,10216,8428,7652,10138,8394,7147,10129},
    {8278,8173,10099,8492,6975,10189,8426,7672,10138,8399,7167,10130},
    {8268,8193,10097,8421,6918,10160,8423,7692,10137,8403,7187,10131},
    {8258,8213,10094,8347,6862,10129,8421,7712,10136,8407,7207,10133},
    {8247,8233,10092,8268,6807,10097,8418,7732,10135,8411,7227,10134},
    {8286,8258,10114,8236,6747,10089,8414,7752,10135,8414,7248,10135},
    {8367,8204,10146,8247,6767,10092,8411,7773,10134,8418,7268,10135},
    {8444,8148,10176,8258,6787,10094,8407,7793,10133,8421,7288,10136},
    {8515,8091,10204,8268,6807,10097,8403,7813,10131,8423,7308,10137},
    {8580,8033,10230,8278,6827,10099,8399,7833,10130,8426,7328,10138},
    {8639,7974,10252,8288,6846,10102,8394,7853,10129,8428,7348,10138},
    {8691,7913,10272,8297,6866,10104,8389,7873,10128,8430,7369,10139},
    {8735,7852,10289,8306,6886,10106,8384,7893,10126,8432,7389,10139},
    {8771,7789,10303,8315,6906,10108,8378,7914,10125,8433,7409,10140},
    {8799,7726,10313,8323,6926,10110,8372,7934,10123,8434,7429,10140},
    {8819,7662,10321,8331,6946,10112,8366,7954,10122,8435,7449,10140},
    {8830,7597,10325,8339,6966,10114,8360,7974,10120,8435,7470,10140},
    {8832,7532,10326,8346,6986,10116,8353,7994,10118,8436,7490,10140},
    {8825,7468,10323,8353,7006,10118,8346,8014,10116,8436,7510,10140},
    {8811,7403,10317,8360,7026,10120,8339,8034,10114,8435,7530,10140},
    {8787,7339,10308,8366,7046,10122,8331,8054,10112,8435,7551,10140},
    {8756,7276,10295,8372,7066,10123,8323,8074,10110,8434,7571,10140},
    {8717,7214,10280,8378,7086,10125,8315,8094,10108,8433,7591,10140},
    {8670,7152,10261,8384,7107,10126,8306,8114,10106,8432,7611,10139},
    {8617,7092,10240,8389,7127,10128,8297,8134,10104,8430,7631,10139},
    {8557,7033,10216,8394,7147,10129,8288,8154,10102,8428,7652,10138},
    {8492,6975,10189,8399,7167,10130,8278,8173,10099,8426,7672,10138},
    {8421,6918,10160,8403,7187,10131,8268,8193,10097,8423,7692,10137},
    {8347,6862,10129,8407,7207,10133,8258,8213,10094,8421,7712,10136},
    {8268,6807,10097,8411,7227,10134,8247,8233,10092,8418,7732,10135},
    {8236,6747,10089,8414,7248,10135,8286,8258,10114,8414,7752,10135},
    {8247,6767,10092,8418,7268,10135,8367,8204,10146,8411,7773,10134},
    {8258,6787,10094,8421,7288,10136,8444,8148,10176,8407,7793,10133},
    {8268,6807,10097,8423,7308,10137,8515,8091,10204,8403,7813,10131},
    {8278,6827,10099,8426,7328,10138,8580,8033,10230,8399,7833,10130},
    {8288,6846,10102,8428,7348,10138,8639,7974,10252,8394,7853,10129},
    {8297,6866,10104,8430,7369,10139,8691,7913,10272,8389,7873,10128},
    {8306,6886,10106,8432,7389,10139,8735,7852,10289,8384,7893,10126},
    {8315,6906,10108,8433,7409,10140,8771,7789,10303,8378,7914,10125},
    {8323,6926,10110,8434,7429,10140,8799,7726,10313,8372,7934,10123},
    {8331,6946,10112,8435,7449,10140,8819,7662,10321,8366,7954,10122},
    {8339,6966,10114,8435,7470,10140,8830,7597,10325,8360,7974,10120},
    {8346,6986,10116,8436,7490,10140,8832,7532,10326,8353,7994,10118},
    {8353,7006,10118,8436,7510,10140,8825,7468,10323,8346,8014,10116},
    {8360,7026,10120,8435,7530,10140,8811,7403,10317,8339,8034,10114},
    {8366,7046,10122,8435,7551,10140,8787,7339,10308,8331,8054,10112},
    {8372,7066,10123,8434,7571,10140,8756,7276,10295,8323,8074,10110},
    {8378,7086,10125,8433,7591,10140,8717,7214,10280,8315,8094,10108},
    {8384,7107,10126,8432,7611,10139,8670,7152,10261,8306,8114,10106},
    {8389,7127,10128,8430,7631,10139,8617,7092,10240,8297,8134,10104},
    {8394,7147,10129,8428,7652,10138,8557,7033,10216,8288,8154,10102},
    {8399,7167,10130,8426,7672,10138,8492,6975,10189,8278,8173,10099},
    {8403,7187,10131,8423,7692,10137,8421,6918,10160,8268,8193,10097},
    {8407,7207,10133,8421,7712,10136,8347,6862,10129,8258,8213,10094},
    {8411,7227,10134,8418,7732,10135,8268,6807,10097,8247,8233,10092}};
    for(int j=1;j<13;j++)
    {
        servo_speed(fd, j,70);
    }
    for(int j = 0;j < 100; j++){
        servo_position(fd, 1,left[j][0]);
        servo_position(fd, 2,left[j][1]);
        servo_position(fd, 3,left[j][2]);
        servo_position(fd, 4,left[j][3]);
        servo_position(fd, 5,left[j][4]);
        servo_position(fd, 6,left[j][5]);
        servo_position(fd, 10,left[j][6]);
        servo_position(fd, 11,left[j][7]);
        servo_position(fd, 12,left[j][8]);
        servo_position(fd, 7,left[j][9]);
        servo_position(fd, 8,left[j][10]);
        servo_position(fd, 9,left[j][11]);
   		sleepms(2); 
	}
}

void turn_right(int fd)
{
    int right[100][12]={{8414,7248,10135,8414,7752,10135,8286,6742,10114,8236,8253,10089},
    {8411,7227,10134,8418,7732,10135,8367,6796,10146,8247,8233,10092},
    {8407,7207,10133,8421,7712,10136,8444,6852,10176,8258,8213,10094},
    {8403,7187,10131,8423,7692,10137,8515,6909,10204,8268,8193,10097},
    {8399,7167,10130,8426,7672,10138,8580,6967,10230,8278,8173,10099},
    {8394,7147,10129,8428,7652,10138,8639,7026,10252,8288,8154,10102},
    {8389,7127,10128,8430,7631,10139,8691,7087,10272,8297,8134,10104},
    {8384,7107,10126,8432,7611,10139,8735,7148,10289,8306,8114,10106},
    {8378,7086,10125,8433,7591,10140,8771,7211,10303,8315,8094,10108},
    {8372,7066,10123,8434,7571,10140,8799,7274,10313,8323,8074,10110},
    {8366,7046,10122,8435,7551,10140,8819,7338,10321,8331,8054,10112},
    {8360,7026,10120,8435,7530,10140,8830,7403,10325,8339,8034,10114},
    {8353,7006,10118,8436,7510,10140,8832,7468,10326,8346,8014,10116},
    {8346,6986,10116,8436,7490,10140,8825,7532,10323,8353,7994,10118},
    {8339,6966,10114,8435,7470,10140,8811,7597,10317,8360,7974,10120},
    {8331,6946,10112,8435,7449,10140,8787,7661,10308,8366,7954,10122},
    {8323,6926,10110,8434,7429,10140,8756,7724,10295,8372,7934,10123},
    {8315,6906,10108,8433,7409,10140,8717,7786,10280,8378,7914,10125},
    {8306,6886,10106,8432,7389,10139,8670,7848,10261,8384,7893,10126},
    {8297,6866,10104,8430,7369,10139,8617,7908,10240,8389,7873,10128},
    {8288,6846,10102,8428,7348,10138,8557,7967,10216,8394,7853,10129},
    {8278,6827,10099,8426,7328,10138,8492,8025,10189,8399,7833,10130},
    {8268,6807,10097,8423,7308,10137,8421,8082,10160,8403,7813,10131},
    {8258,6787,10094,8421,7288,10136,8347,8138,10129,8407,7793,10133},
    {8247,6767,10092,8418,7268,10135,8268,8193,10097,8411,7773,10134},
    {8286,6742,10114,8414,7248,10135,8236,8253,10089,8414,7752,10135},
    {8367,6796,10146,8411,7227,10134,8247,8233,10092,8418,7732,10135},
    {8444,6852,10176,8407,7207,10133,8258,8213,10094,8421,7712,10136},
    {8515,6909,10204,8403,7187,10131,8268,8193,10097,8423,7692,10137},
    {8580,6967,10230,8399,7167,10130,8278,8173,10099,8426,7672,10138},
    {8639,7026,10252,8394,7147,10129,8288,8154,10102,8428,7652,10138},
    {8691,7087,10272,8389,7127,10128,8297,8134,10104,8430,7631,10139},
    {8735,7148,10289,8384,7107,10126,8306,8114,10106,8432,7611,10139},
    {8771,7211,10303,8378,7086,10125,8315,8094,10108,8433,7591,10140},
    {8799,7274,10313,8372,7066,10123,8323,8074,10110,8434,7571,10140},
    {8819,7338,10321,8366,7046,10122,8331,8054,10112,8435,7551,10140},
    {8830,7403,10325,8360,7026,10120,8339,8034,10114,8435,7530,10140},
    {8832,7468,10326,8353,7006,10118,8346,8014,10116,8436,7510,10140},
    {8825,7532,10323,8346,6986,10116,8353,7994,10118,8436,7490,10140},
    {8811,7597,10317,8339,6966,10114,8360,7974,10120,8435,7470,10140},
    {8787,7661,10308,8331,6946,10112,8366,7954,10122,8435,7449,10140},
    {8756,7724,10295,8323,6926,10110,8372,7934,10123,8434,7429,10140},
    {8717,7786,10280,8315,6906,10108,8378,7914,10125,8433,7409,10140},
    {8670,7848,10261,8306,6886,10106,8384,7893,10126,8432,7389,10139},
    {8617,7908,10240,8297,6866,10104,8389,7873,10128,8430,7369,10139},
    {8557,7967,10216,8288,6846,10102,8394,7853,10129,8428,7348,10138},
    {8492,8025,10189,8278,6827,10099,8399,7833,10130,8426,7328,10138},
    {8421,8082,10160,8268,6807,10097,8403,7813,10131,8423,7308,10137},
    {8347,8138,10129,8258,6787,10094,8407,7793,10133,8421,7288,10136},
    {8268,8193,10097,8247,6767,10092,8411,7773,10134,8418,7268,10135},
    {8236,8253,10089,8286,6742,10114,8414,7752,10135,8414,7248,10135},
    {8247,8233,10092,8367,6796,10146,8418,7732,10135,8411,7227,10134},
    {8258,8213,10094,8444,6852,10176,8421,7712,10136,8407,7207,10133},
    {8268,8193,10097,8515,6909,10204,8423,7692,10137,8403,7187,10131},
    {8278,8173,10099,8580,6967,10230,8426,7672,10138,8399,7167,10130},
    {8288,8154,10102,8639,7026,10252,8428,7652,10138,8394,7147,10129},
    {8297,8134,10104,8691,7087,10272,8430,7631,10139,8389,7127,10128},
    {8306,8114,10106,8735,7148,10289,8432,7611,10139,8384,7107,10126},
    {8315,8094,10108,8771,7211,10303,8433,7591,10140,8378,7086,10125},
    {8323,8074,10110,8799,7274,10313,8434,7571,10140,8372,7066,10123},
    {8331,8054,10112,8819,7338,10321,8435,7551,10140,8366,7046,10122},
    {8339,8034,10114,8830,7403,10325,8435,7530,10140,8360,7026,10120},
    {8346,8014,10116,8832,7468,10326,8436,7510,10140,8353,7006,10118},
    {8353,7994,10118,8825,7532,10323,8436,7490,10140,8346,6986,10116},
    {8360,7974,10120,8811,7597,10317,8435,7470,10140,8339,6966,10114},
    {8366,7954,10122,8787,7661,10308,8435,7449,10140,8331,6946,10112},
    {8372,7934,10123,8756,7724,10295,8434,7429,10140,8323,6926,10110},
    {8378,7914,10125,8717,7786,10280,8433,7409,10140,8315,6906,10108},
    {8384,7893,10126,8670,7848,10261,8432,7389,10139,8306,6886,10106},
    {8389,7873,10128,8617,7908,10240,8430,7369,10139,8297,6866,10104},
    {8394,7853,10129,8557,7967,10216,8428,7348,10138,8288,6846,10102},
    {8399,7833,10130,8492,8025,10189,8426,7328,10138,8278,6827,10099},
    {8403,7813,10131,8421,8082,10160,8423,7308,10137,8268,6807,10097},
    {8407,7793,10133,8347,8138,10129,8421,7288,10136,8258,6787,10094},
    {8411,7773,10134,8268,8193,10097,8418,7268,10135,8247,6767,10092},
    {8414,7752,10135,8236,8253,10089,8414,7248,10135,8286,6742,10114},
    {8418,7732,10135,8247,8233,10092,8411,7227,10134,8367,6796,10146},
    {8421,7712,10136,8258,8213,10094,8407,7207,10133,8444,6852,10176},
    {8423,7692,10137,8268,8193,10097,8403,7187,10131,8515,6909,10204},
    {8426,7672,10138,8278,8173,10099,8399,7167,10130,8580,6967,10230},
    {8428,7652,10138,8288,8154,10102,8394,7147,10129,8639,7026,10252},
    {8430,7631,10139,8297,8134,10104,8389,7127,10128,8691,7087,10272},
    {8432,7611,10139,8306,8114,10106,8384,7107,10126,8735,7148,10289},
    {8433,7591,10140,8315,8094,10108,8378,7086,10125,8771,7211,10303},
    {8434,7571,10140,8323,8074,10110,8372,7066,10123,8799,7274,10313},
    {8435,7551,10140,8331,8054,10112,8366,7046,10122,8819,7338,10321},
    {8435,7530,10140,8339,8034,10114,8360,7026,10120,8830,7403,10325},
    {8436,7510,10140,8346,8014,10116,8353,7006,10118,8832,7468,10326},
    {8436,7490,10140,8353,7994,10118,8346,6986,10116,8825,7532,10323},
    {8435,7470,10140,8360,7974,10120,8339,6966,10114,8811,7597,10317},
    {8435,7449,10140,8366,7954,10122,8331,6946,10112,8787,7661,10308},
    {8434,7429,10140,8372,7934,10123,8323,6926,10110,8756,7724,10295},
    {8433,7409,10140,8378,7914,10125,8315,6906,10108,8717,7786,10280},
    {8432,7389,10139,8384,7893,10126,8306,6886,10106,8670,7848,10261},
    {8430,7369,10139,8389,7873,10128,8297,6866,10104,8617,7908,10240},
    {8428,7348,10138,8394,7853,10129,8288,6846,10102,8557,7967,10216},
    {8426,7328,10138,8399,7833,10130,8278,6827,10099,8492,8025,10189},
    {8423,7308,10137,8403,7813,10131,8268,6807,10097,8421,8082,10160},
    {8421,7288,10136,8407,7793,10133,8258,6787,10094,8347,8138,10129},
    {8418,7268,10135,8411,7773,10134,8247,6767,10092,8268,8193,10097}};
    for(int j=1;j<13;j++){
        servo_speed(fd, j,70);
    }
    for(int j = 0; j < 100; j++){
        servo_position(fd, 1,right[j][0]);
        servo_position(fd, 2,right[j][1]);
        servo_position(fd, 3,right[j][2]);
        servo_position(fd, 4,right[j][3]);
        servo_position(fd, 5,right[j][4]);
        servo_position(fd, 6,right[j][5]);
        servo_position(fd, 10,right[j][6]);
        servo_position(fd, 11,right[j][7]);
        servo_position(fd, 12,right[j][8]);
        servo_position(fd, 7,right[j][9]);
        servo_position(fd, 8,right[j][10]);
        servo_position(fd, 9,right[j][11]);
   		sleepms(2); 
	}
}

int main(){
    int po = 1, i, fd = 0;
    char ch =0;
    wiringPiSetupGpio();
    pullUpDnControl(14,PUD_UP);
    pullUpDnControl(15,PUD_UP);
    usleep(50*1000);
    fd = opens(); 
    
    while(1){
		scanf(" %c",&ch);
   	    if(ch > 0x2f){ 
			switch(ch){
				case 'c':
					close_motion(fd);
	    			sleepms(50);
            		ch = 0;
            		printf("fin c\n\n");
					break;	
            
				case 'o':
					open_motion_crawl(fd);
					sleepms(50);
					ch = 0;
					printf("fin o\n\n");
					break;

				case 'p':
					open_motion(fd);
					sleepms(50);
					ch = 0;
					printf("fin p\n\n");
					break;
				
				case '1':
					stand_set_motion(fd);
					sleepms(50);
					ch = 0;
					printf("fin stand_set_motion\n\n");
					break;
				
				case '2':
					stand_motion(fd);
					sleepms(50);
					ch = 0;
					printf("fin stand_motion\n\n");
					break;

				case '3':
					stand_close(fd);
					sleepms(50);
					ch = 0;
					printf("fin stand_closei\n\n");
					break;
	
				case '4':
					set_motion(fd);
					sleepms(50);
					ch = 0;
					printf("fin set_motion\n\n");
					break;

				case '5':
					flip_motion(fd);
					sleepms(50);
					ch = 0;
					printf("fin flip_motion\n\n");
					break;

				case '6':
					end_motion(fd);
					sleepms(50);
					ch = 0;
					printf("fin end_motion\n\n");
					break;

				case 'w':
					crawl_motion1(fd);
					sleepms(50);
					ch = 0;
					printf("fin crawl_motion1\n\n");
					break;

				case 's':
					crawl_motion2(fd);
					sleepms(50);
					ch = 0;
					printf("fin crawl_motion2\n\n");
					break;

				case 'a':
					turn_left(fd);
					sleepms(50);
					ch = 0;
					printf("fin turn_left\n\n");
					break;

				case 'd':
					turn_right(fd);
					sleepms(50);
					ch = 0;
					printf("fin turn_right\n\n");
					break;

				case 'q':
	    			printf("start\n");
            		for(i = 3; i <= 12; i +=3){
                		servo_speed(fd, i,50);
                		servo_position(fd, i,10110);
            		}
	    			sleepms(50);
					ch=0;
            		break;
            		
				case 'f':
					printf("Close raspiC.c\n");
	    			close(fd);  
	    			exit(1);
	    			break;
            
	    		default:
            		printf("def\n");
	    			ch = 0;
	    			break;
        	}
		}
    }
	return 0;
}

